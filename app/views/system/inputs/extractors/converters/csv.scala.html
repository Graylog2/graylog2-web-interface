@(enabled: Boolean = false,
        converter: org.graylog2.restclient.models.Converter = null)
@import scala.util.Try

<div class="xtrc-converter xtrc-converter-csv" @if(!enabled) { style="display:none;" } >
    <div class="checkbox">
        <label>
            <input type="checkbox" value="enabled" name="converter_csv" @if(enabled) { checked="checked" } />
            Add CSV columns as fields
        </label>
    </div>

    <div class="xtrc-converter-subfield">
        <div class="form-group">
            <label for="converter_csv_column_header">
                Field names:
            </label>
            <div class="row">
                <div class="col-md-4">
                    <input name="csv_column_header" id="converter_csv_column_header"
                    type="text" placeholder="field1,field2,field3" class="form-control"
                        @if(converter != null) { value="@converter.getConfig.get("column_header")"} />
                </div>
            </div>
        </div>
    </div>

    <div class="xtrc-converter-subfield">
        <div class="form-group">
            <label for="converter_csv_separator">
                Separator character:
            </label>
            <div class="row">
                <div class="col-md-4">
                    <input name="csv_separator" id="converter_csv_separator"
                    type="text" maxlength="2" class="form-control"
                    value="@if(converter == null) {,} else {@converter.getConfig.get("separator")}" />
                </div>
            </div>
            <span class="help-block">
                For example <code>,</code>. <code>\n</code> and <code>\t</code> will be translated to a single character.
            </span>
        </div>
    </div>

    <div class="xtrc-converter-subfield">
        <div class="form-group">
            <label for="converter_csv_quote_char">
                Quote character:
            </label>
            <div class="row">
                <div class="col-md-4">
                    <input name="csv_quote_char" id="converter_csv_quote_char"
                    type="text" maxlength="1" class="form-control"
                    value="@if(converter == null) {&quot;} else {@converter.getConfig.get("quote_char")}" />
                </div>
            </div>
        </div>
    </div>

    <div class="xtrc-converter-subfield">
        <div class="form-group">
            <label for="converter_csv_escape_char">
                Escape character:
            </label>
            <div class="row">
                <div class="col-md-4">
                    <input name="csv_escape_char" id="converter_csv_escape_char"
                    type="text" maxlength="1" class="form-control"
                    value="@if(converter == null) {\} else {@converter.getConfig.get("escape_char")}" />
                </div>
            </div>
            <span class="help-block">Character used to escape the separator and quote characters.</span>
        </div>
    </div>

    <div class="xtrc-converter-subfield">
        <div class="checkbox">
            <label for="converter_csv_strict_quotes">
                <input name="csv_strict_quotes" id="converter_csv_strict_quotes"
                    type="checkbox" class="input-mini" value="true"
                    @if(Try(converter.getConfig.get("strict_quotes").toString.toBoolean).getOrElse(false)) { checked="checked" } />
                Strict quotes
            </label>
        </div>
        <span class="help-block">Ignore content outside of quotes.</span>
    </div>

    <div class="xtrc-converter-subfield">
        <div class="checkbox">
            <label for="converter_csv_trim_leading_whitespace">
                <input name="csv_trim_leading_whitespace" id="converter_csv_trim_leading_whitespace"
                    type="checkbox" value="true" class="input-mini"
                    @if(Try(converter.getConfig.get("trim_leading_whitespace").toString.toBoolean).getOrElse(false)) { checked="checked" } />
                Trim leading whitespace
            </label>
        </div>
    </div>

</div>